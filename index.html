// firebase.js (contoh, pastikan inisialisasi Firebase ada di sini)
// import { initializeApp } from "firebase/app";
// import { getFirestore, collection, getDocs, doc, getDoc } from "firebase/firestore";

// const firebaseConfig = { ... }; // Konfigurasi Firebase Anda
// const app = initializeApp(firebaseConfig);
// const db = getFirestore(app);

// Fungsi untuk memuat produk
async function loadProducts() {
    const productsContainer = document.getElementById('products-list'); // Pastikan ID ini ada di HTML Anda
    productsContainer.innerHTML = ''; // Bersihkan kontainer

    try {
        const productsCol = collection(db, 'products');
        const productSnapshot = await getDocs(productsCol); // Mengambil semua dokumen di koleksi 'products'
        const productList = productSnapshot.docs.map(doc => doc.data());

        productList.sort((a, b) => a.order - b.order); // Urutkan berdasarkan 'order' jika ada

        productList.forEach(product => {
            if (product.is_available) { // Hanya tampilkan yang tersedia
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <h3>${product.name}</h3>
                    <p>${product.description}</p>
                    <p>Price: Rp ${product.price.toLocaleString('id-ID')}</p>
                    <img src="${product.image_url}" alt="${product.name}" style="width:100px; height:auto;">
                `;
                productsContainer.appendChild(productCard);
            }
        });
        console.log("Products loaded successfully for index.html");
    } catch (error) {
        console.error("Error loading products for index.html: ", error);
        // Tampilkan pesan error di UI jika perlu
        productsContainer.innerHTML = `<p>Failed to load menu data. Please try again later. (${error.message})</p>`;
    }
}

// Fungsi untuk memuat banner (contoh)
async function loadBanner() {
    const bannerContainer = document.getElementById('main-banner'); // Pastikan ID ini ada
    try {
        const docRef = doc(db, "siteContent", "main_banner"); // Mengambil dokumen 'main_banner'
        const docSnap = await getDoc(docRef);

        if (docSnap.exists() && docSnap.data().is_active) {
            const bannerData = docSnap.data();
            bannerContainer.innerHTML = `
                <img src="${bannerData.image_url}" alt="${bannerData.title}" style="width:100%; height:auto;">
                <h2>${bannerData.title}</h2>
                <p>${bannerData.subtitle}</p>
            `;
            console.log("Banner loaded successfully.");
        } else {
            console.log("No active banner found.");
            bannerContainer.innerHTML = `<p>No banner available.</p>`;
        }
    } catch (error) {
        console.error("Error loading banner: ", error);
        bannerContainer.innerHTML = `<p>Failed to load banner. (${error.message})</p>`;
    }
}


// Panggil fungsi ini saat DOMContentLoaded
document.addEventListener('DOMContentLoaded', () => {
    loadProducts();
    loadBanner();
    // Panggil fungsi lain untuk kategori, footer, dll.
});
